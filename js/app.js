var app=angular.module("app",["ngRoute","ngTouch"]);app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"views/home.php",controller:"homeCtrl"}).otherwise({redirectTo:"/"})}]),app.controller("allCtrl",function(){}),app.controller("homeCtrl",function($scope,$http){$scope.goSearch=!1,$scope.result=!1,$scope.hideResult=function(){$scope.result=!1},$scope.search=function(city){if($scope.searchCity.city.$error.minlength!==!0&&void 0!==city&&""!==city){$scope.goSearch=!0;var dayInfos=function(){var url="http://api.openweathermap.org/data/2.5/find?q="+city+"&mode=json&units=metric&lang=fr&type=accurate";api(url,"currentDay")};dayInfos();var dayInfos=function(){var url="http://api.openweathermap.org/data/2.5/forecast/daily?q="+city+"&mode=json&units=metric&cnt=10&lang=fr&type=accurate";api(url,"otherDays")};dayInfos()}};var api=function(url,typeDay){$http({method:"GET",url:url}).success(function(response){$scope.goSearch=!1,console.log(response),console.log(response.cod),"404"!==response.cod&&($scope.result=!0,"currentDay"===typeDay?($scope.cityDay=response.list[0].name,$scope.cityCountry=response.list[0].sys.country,$scope.temperatureDay=response.list[0].main.temp.toFixed(0),$scope.iconDayActif=response.list[0].weather[0].icon,$scope.dayActif=day(),$scope.dateActif=date(),$scope.humidityDay=response.list[0].main.humidity.toFixed(0),$scope.pressureDay=response.list[0].main.pressure.toFixed(0)):"otherDays"===typeDay&&($scope.days=response.list))}).error(function(headers,status,config){$scope.goSearch=!1,console.log(headers),console.log(status),console.log(config)})},today=new Date,days=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],months=[{name:"Janvier",limite:31},{name:"Février",limite:30},{name:"Mars",limite:31},{name:"Avril",limite:30},{name:"Mai",limite:31},{name:"Juin",limite:30},{name:"Juillet",limite:31},{name:"Août",limite:31},{name:"Septembre",limite:30},{name:"Octobre",limite:31},{name:"Novembre",limite:30},{name:"Décembre",limite:31}],day=function(){return days[today.getDay()]},date=function(){return today.getDate()+" "+months[today.getMonth()].name+" "+today.getFullYear()}}),app.directive("header",function(){return{restrict:"E",replace:"true",templateUrl:"views/header.php"}}),app.directive("footer",function(){return{retrict:"E",replace:"true",templateUrl:"views/footer.php",link:function(scope){scope.tab1=!0,scope.changeActive=function(){scope.tab1===!0?scope.tab1=!1:scope.tab1=!0}}}});