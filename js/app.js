var app=angular.module("app",["ngRoute","ngTouch","services"]),services=angular.module("services",[]);app.config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"views/home.php",controller:"homeCtrl"}).otherwise({redirectTo:"/"})}]),app.controller("allCtrl",function(){}),app.controller("homeCtrl",function($scope,$http,WindSpeed,Api,Ndate,Random,Win){$scope.goSearch=!1,$scope.result=!1;var results;results=!1,$scope.hideResult=function(){$scope.result=!1},$scope.hideResultSwipe=function(){Win.width()<771&&($scope.result=!1)},$scope.showResultSwipe=function(){Win.width()<771&&results===!0&&($scope.result=!0)},$scope.search=function(city){if(Random.run("weatherDay"),$scope.searchCity.city.$error.minlength!==!0&&void 0!==city&&""!==city){$scope.goSearch=!0;var maxDays=10;Api.get("http://api.openweathermap.org/data/2.5/forecast/daily?q="+city+"&mode=json&units=metric&cnt="+maxDays+"&lang=fr&type=accurate").then(function(response){if(console.log(response),console.log(response.cod),$scope.goSearch=!1,"404"!==response.cod){$scope.result=!0,results=!0,$scope.cityDay=response.city.name,$scope.cityCountry=response.city.country,$scope.temperatureDay=response.list[0].temp.day.toFixed(0),$scope.iconDayActif=response.list[0].weather[0].icon,$scope.dayActif=Ndate.day(response.list[0].dt),$scope.dateActif=Ndate.fullDate(response.list[0].dt),$scope.humidityDay=response.list[0].humidity.toFixed(0),$scope.pressureDay=response.list[0].pressure.toFixed(0),$scope.speedDay=WindSpeed.km(response.list[0].speed).toFixed(0),response.list[0].rain&&($scope.rain="Précipitations : "+response.list[0].rain+" mm");for(var daysInfo=[],i=1;maxDays>i;i++){var rainResponse;response.list[i].rain&&(rainResponse="Précipitations : "+response.list[i].rain+" mm"),daysInfo.push({day:Ndate.day(response.list[i].dt),date:Ndate.fullDate(response.list[i].dt),temp:response.list[i].temp.max.toFixed(0),minTemp:response.list[i].temp.min.toFixed(0),icon:response.list[i].weather[0].icon,humidityOtherDay:response.list[i].humidity.toFixed(0),pressureOtherDay:response.list[i].pressure.toFixed(0),speedOtherDay:WindSpeed.km(response.list[i].speed).toFixed(0),rainOtherDay:rainResponse})}$scope.days=daysInfo}})}}}),app.directive("header",function(){return{restrict:"E",replace:"true",templateUrl:"views/header.php"}}),app.directive("footer",function(){return{retrict:"E",replace:"true",templateUrl:"views/footer.php",link:function(scope){scope.tab1=!0,scope.changeActive=function(){scope.tab1===!0?scope.tab1=!1:scope.tab1=!0}}}}),services.factory("WindSpeed",function(){var windSpeed={};return windSpeed.km=function(speed){var speedKm=3.6*speed;return speedKm},windSpeed}),services.factory("Api",function($http){var api={};return api.get=function(url){return $http({method:"GET",url:url}).then(function(response){return response.data})},api}),services.factory("Ndate",function(){var ndate={},days=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],months=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"];return ndate.day=function(number){var dayNumber=ndate.timestamp(number).getDay(),day=days[dayNumber];return day},ndate.fullDate=function(number){var date=ndate.timestamp(number).getDate(),monthNumber=ndate.timestamp(number).getMonth(),month=months[monthNumber],year=ndate.timestamp(number).getFullYear();return date+" "+month+" "+year},ndate.timestamp=function(time){return new Date(1e3*time)},ndate}),services.factory("Random",function(){var random={};return random.run=function(elem){console.log(elem);var nb=Math.floor(16*Math.random()+1),elem=document.getElementById(elem);elem.style.backgroundImage="url(images/bg"+nb+".jpg)"},random}),services.factory("Win",function(){var win={};return win.width=function(){var width=document.body.innerWidth||window.innerWidth;return width},win});